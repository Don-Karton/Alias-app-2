<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alias Game - DiSpace</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ª–æ–∞–¥–µ—Ä */
        .loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
        }

        .loader-logo {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 40px;
            animation: logoGlow 2s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
        }

        .loader-progress {
            width: 300px;
            height: 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            position: relative;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.2);
        }

        .loader-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fff 0%, #a8edea 50%, #fed6e3 100%);
            border-radius: 20px;
            width: 0%;
            animation: progressWave 3s ease-in-out forwards;
            box-shadow: 0 0 20px rgba(255,255,255,0.6);
            position: relative;
        }

        .loader-progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        .loader-text {
            font-size: 18px;
            font-weight: 600;
            opacity: 0.9;
            animation: textPulse 2s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { 
                text-shadow: 0 0 20px rgba(255,255,255,0.5);
                transform: scale(1);
            }
            50% { 
                text-shadow: 0 0 30px rgba(255,255,255,0.8), 0 0 40px rgba(255,255,255,0.6);
                transform: scale(1.05);
            }
        }

        @keyframes progressWave {
            0% { 
                width: 0%; 
                box-shadow: 0 0 20px rgba(255,255,255,0.3);
            }
            50% { 
                width: 70%; 
                box-shadow: 0 0 30px rgba(255,255,255,0.7);
            }
            100% { 
                width: 100%; 
                box-shadow: 0 0 40px rgba(255,255,255,0.9);
            }
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(300px); }
        }

        @keyframes textPulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 10px;
            min-height: 100vh;
            position: relative;
        }

        .page {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-in;
            min-height: calc(100vh - 20px);
            position: relative;
        }

        .page.active {
            display: block;
        }

        /* –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –∑–≤—É–∫–∞ */
        .sound-dropdown {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }

        .sound-dropdown-toggle {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.9);
            color: white;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .sound-dropdown-toggle:hover {
            background: rgba(102, 126, 234, 1);
            transform: scale(1.1);
        }

        .sound-dropdown-menu {
            position: absolute;
            top: 55px;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            padding: 8px;
            min-width: 120px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .sound-dropdown.active .sound-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .sound-dropdown-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 12px;
            cursor: pointer;
            border-radius: 8px;
            transition: background 0.2s ease;
            font-size: 14px;
            color: #333;
            white-space: nowrap;
        }

        .sound-dropdown-item:hover {
            background: #f5f5f5;
        }

        .sound-dropdown-item.active {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        /* –ò–≥—Ä–æ–≤–∞—è —à–∞–ø–∫–∞ - –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è */
        .game-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(102, 126, 234, 0.95);
            color: white;
            backdrop-filter: blur(10px);
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            height: 60px;
        }

        .game-score {
            font-size: 16px;
            font-weight: 600;
        }

        .game-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: rgba(255,255,255,0.9);
            color: #667eea;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .control-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .control-btn.muted {
            background: rgba(255,0,0,0.9);
            color: white;
        }

        /* –ò–≥—Ä–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —É—á–µ—Ç–æ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —à–∞–ø–∫–∏ */
        .game-screen {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 0;
            border-radius: 0;
            min-height: 100vh;
        }

        .game-content {
            padding-top: 70px;
            padding-bottom: 120px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .current-team {
            text-align: center;
            font-size: clamp(18px, 5vw, 20px);
            color: white;
            margin: 15px 0;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1, h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #667eea;
        }

        h1 {
            font-size: clamp(24px, 6vw, 32px);
        }

        h2 {
            font-size: clamp(20px, 5vw, 24px);
        }

        .menu-button {
            display: block;
            width: 100%;
            padding: 18px;
            margin: 10px 0;
            border: none;
            border-radius: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .menu-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .team-list {
            margin: 20px 0;
        }

        .team-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            margin: 10px 0;
            background: #f7f7f7;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .team-item:hover {
            background: #e9e9e9;
        }

        .team-name {
            font-size: clamp(16px, 4vw, 18px);
            font-weight: 500;
        }

        .team-score {
            font-size: clamp(20px, 5vw, 24px);
            font-weight: bold;
            color: #667eea;
        }

        .add-team-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            margin: 20px auto;
            border: 3px dashed #667eea;
            border-radius: 50%;
            background: white;
            color: #667eea;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .add-team-btn:hover {
            background: #667eea;
            color: white;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .category-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 10px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            font-size: clamp(13px, 3vw, 16px);
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
            min-height: 90px;
            position: relative;
        }

        .category-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .category-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .category-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .category-tooltip {
            font-size: 10px;
            opacity: 0.7;
            text-align: center;
            margin-top: 4px;
        }

        /* –°—Ç–∏–ª—å –±–∞—Ä–∞–±–∞–Ω–∞ –¥–ª—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ */
        .difficulty-selector {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px 15px;
            border: 1px solid #e9ecef;
        }

        .difficulty-btn {
            width: 45px;
            height: 45px;
            border: 2px solid #667eea;
            border-radius: 50%;
            background: white;
            color: #667eea;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            user-select: none;
        }

        .difficulty-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .difficulty-display {
            min-width: 130px;
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 15px;
            border: 2px solid #e9ecef;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .difficulty-level {
            font-size: 28px;
            margin-bottom: 6px;
        }

        .difficulty-name {
            font-size: 16px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 4px;
        }

        .difficulty-desc {
            font-size: 11px;
            color: #666;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã */
        .settings-group {
            margin: 25px 0;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 1px solid #e9ecef;
        }

        .settings-group label {
            display: block;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: clamp(15px, 4vw, 18px);
            color: #667eea;
            text-align: center;
        }

        .setting-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .setting-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #667eea;
            border-radius: 50%;
            background: white;
            color: #667eea;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            user-select: none;
        }

        .setting-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }

        .setting-btn:active {
            transform: scale(0.95);
        }

        .setting-value {
            min-width: 70px;
            text-align: center;
            font-size: clamp(20px, 5vw, 28px);
            font-weight: bold;
            color: #667eea;
            padding: 8px 15px;
            background: white;
            border-radius: 12px;
            border: 2px solid #e9ecef;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        .bet-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
            margin: 20px 0;
        }

        .bet-slider::-webkit-slider-thumb {
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .bet-slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }

        .bet-value {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-top: 10px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            gap: 15px;
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }

        .checkbox-group input[type="checkbox"] {
            width: 24px;
            height: 24px;
            accent-color: #667eea;
        }

        .checkbox-group label {
            font-size: clamp(14px, 3vw, 16px);
            margin: 0;
            color: #333;
            text-align: left;
        }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            padding: 20px;
            position: relative;
        }

        .game-card {
            position: relative;
            width: min(300px, 85vw);
            height: min(300px, 40vh);
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border: 4px solid #667eea;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
            font-size: clamp(20px, 5vw, 32px);
            font-weight: bold;
            cursor: grab;
            user-select: none;
            transition: all 0.3s ease;
            touch-action: none;
            text-align: center;
            padding: 20px;
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.3);
        }

        .game-card.dragging {
            cursor: grabbing;
        }

        .game-card.countdown {
            font-size: clamp(60px, 15vw, 120px);
            color: #667eea;
            animation: countdownPulse 1s ease-in-out;
        }

        @keyframes countdownPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* –§–æ–Ω–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Å–≤–∞–π–ø–æ–≤ */
        .swipe-background {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            pointer-events: none;
        }

        .swipe-bg-left, .swipe-bg-right {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(24px, 6vw, 36px);
            opacity: 0.1;
            transition: opacity 0.3s ease;
        }

        .swipe-bg-left {
            color: #ff6b6b;
            background: linear-gradient(to right, rgba(255,107,107,0.1), transparent);
        }

        .swipe-bg-right {
            color: #51cf66;
            background: linear-gradient(to left, rgba(81,207,102,0.1), transparent);
        }

        .swipe-bg-left.active, .swipe-bg-right.active {
            opacity: 0.4;
            animation: swipePulse 0.5s ease-in-out;
        }

        @keyframes swipePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤–Ω–∏–∑—É */
        .swipe-hints {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 350px;
            margin-top: 20px;
        }

        .swipe-hint {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: white;
            animation: hintPulse 3s ease-in-out infinite;
        }

        .swipe-hint.left {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
        }

        .swipe-hint.right {
            background: linear-gradient(135deg, #51cf66, #4caf50);
        }

        .swipe-hint.ready {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        @keyframes hintPulse {
            0%, 100% { opacity: 0.8; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        .swipe-indicators {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            border-radius: 21px;
            overflow: hidden;
        }

        .swipe-indicator {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 56px;
            font-weight: bold;
        }

        .swipe-indicator.left {
            background: linear-gradient(135deg, rgba(255,107,107,0.4), rgba(255,82,82,0.4));
            color: #ff3030;
        }

        .swipe-indicator.right {
            background: linear-gradient(135deg, rgba(81,207,102,0.4), rgba(76,175,80,0.4));
            color: #2e7d32;
        }

        .swipe-indicator.active {
            opacity: 1;
        }

        /* –¢–∞–π–º–µ—Ä –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ */
        .game-timer {
            position: fixed;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            width: min(180px, 45vw);
            height: 70px;
            background: rgba(255,255,255,0.95);
            border-radius: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: clamp(28px, 7vw, 42px);
            font-weight: bold;
            color: #667eea;
            box-shadow: 0 8px 25px rgba(0,0,0,0.25);
            z-index: 1000;
            border: 3px solid #667eea;
        }

        .game-timer.warning {
            background: linear-gradient(135deg, rgba(255,193,7,0.95), rgba(255,152,0,0.95));
            color: #d32f2f;
            animation: timerPulse 1s infinite;
            border-color: #d32f2f;
        }

        @keyframes timerPulse {
            0%, 100% { transform: translateX(-50%) scale(1); box-shadow: 0 8px 25px rgba(0,0,0,0.25); }
            50% { transform: translateX(-50%) scale(1.1); box-shadow: 0 12px 35px rgba(255,0,0,0.4); }
        }

        .results-list {
            margin: 20px 0;
            max-height: 40vh;
            overflow-y: auto;
        }

        .word-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 8px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
        }

        .word-result.correct {
            background: #4caf50;
            color: white;
        }

        .word-result.incorrect {
            background: #f44336;
            color: white;
        }

        .word-result:active {
            transform: scale(0.98);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            padding: 20px;
            background: #f7f7f7;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: clamp(28px, 7vw, 36px);
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: clamp(12px, 3vw, 14px);
            color: #666;
            margin-top: 5px;
        }

        /* –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–±–µ–¥—ã */
        .victory-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .victory-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(255,215,0,0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 40%, rgba(255,192,203,0.2) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(173,216,230,0.2) 0%, transparent 50%);
            animation: sparkle 4s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .victory-content {
            position: relative;
            z-index: 1;
        }

        .victory-title {
            font-size: clamp(32px, 8vw, 48px);
            margin-bottom: 20px;
            animation: victoryPulse 2s ease-in-out infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .victory-winner {
            font-size: clamp(28px, 7vw, 40px);
            margin-bottom: 30px;
            color: #ffd700;
            text-shadow: 
                0 0 10px rgba(255,215,0,0.8),
                0 0 20px rgba(255,215,0,0.6),
                2px 2px 4px rgba(0,0,0,0.3);
            animation: winnerGlow 3s ease-in-out infinite;
        }

        @keyframes victoryPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes winnerGlow {
            0%, 100% { 
                text-shadow: 
                    0 0 10px rgba(255,215,0,0.8),
                    0 0 20px rgba(255,215,0,0.6),
                    2px 2px 4px rgba(0,0,0,0.3);
            }
            50% { 
                text-shadow: 
                    0 0 20px rgba(255,215,0,1),
                    0 0 30px rgba(255,215,0,0.8),
                    0 0 40px rgba(255,215,0,0.6),
                    2px 2px 4px rgba(0,0,0,0.3);
            }
        }

        .victory-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .victory-stat {
            background: rgba(255,255,255,0.15);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .victory-stat-value {
            font-size: clamp(32px, 8vw, 44px);
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .victory-stat-label {
            font-size: clamp(14px, 3vw, 16px);
            opacity: 0.9;
        }

        .qr-code {
            width: min(180px, 50vw);
            height: min(180px, 50vw);
            margin: 30px auto;
            background: rgba(255,255,255,0.95);
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            font-size: clamp(12px, 3vw, 16px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 3px solid #ffd700;
        }

        .victory-button {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            margin-top: 20px;
            backdrop-filter: blur(10px);
        }

        .victory-button:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 20px;
            max-width: 380px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #667eea;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-buttons button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            touch-action: manipulation;
        }

        .modal-buttons .save {
            background: #667eea;
            color: white;
        }

        .modal-buttons .delete {
            background: #f44336;
            color: white;
        }

        .modal-buttons .cancel {
            background: #e0e0e0;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 20px;
            background: #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            touch-action: manipulation;
            font-size: clamp(14px, 3vw, 16px);
        }

        .back-button:hover {
            background: #d0d0d0;
        }

        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –∏–∫–æ–Ω–æ–∫ */
        .bottom-menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0 15px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 1px solid #e9ecef;
        }

        .bottom-menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 55px;
            position: relative;
            background: white;
            border: 2px solid #e9ecef;
        }

        .bottom-menu-item:hover {
            transform: translateY(-2px);
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }

        .bottom-menu-item .icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .bottom-menu-item .label {
            font-size: 9px;
            font-weight: 600;
            color: #667eea;
            text-align: center;
            line-height: 1.2;
        }

        .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 11px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            margin-bottom: 5px;
            pointer-events: none;
            z-index: 1000;
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 4px solid transparent;
            border-top-color: rgba(0,0,0,0.8);
        }

        .bottom-menu-item:hover .tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–≤—É–∫–∞ */
        .sound-modal .modal-content {
            max-width: 400px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 20px 0;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
        }

        .volume-control label {
            min-width: 120px;
            font-size: clamp(13px, 3vw, 15px);
            font-weight: 600;
            color: #667eea;
        }

        .volume-control input[type="range"] {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-control input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .volume-control .volume-value {
            min-width: 45px;
            text-align: right;
            font-weight: bold;
            color: #667eea;
            font-size: 14px;
        }

        /* –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é */
        .main-menu-about {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #666;
            font-size: clamp(11px, 3vw, 13px);
            line-height: 1.5;
        }

        .main-menu-about h3 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: clamp(15px, 4vw, 17px);
        }

        .main-menu-about p {
            margin-bottom: 8px;
        }

        /* –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤—ã–±–æ—Ä–µ —Ç–µ–º */
        .theme-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
            color: #856404;
            font-size: 14px;
            display: none;
        }

        .theme-warning.show {
            display: block;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
        @media (max-width: 480px) {
            .container {
                padding: 5px;
            }
            
            .page {
                padding: 15px;
                border-radius: 10px;
                min-height: calc(100vh - 10px);
            }
            
            .sound-dropdown {
                top: 8px;
                right: 8px;
            }

            .sound-dropdown-toggle {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .game-header {
                padding: 10px 12px;
                height: 55px;
            }

            .game-content {
                padding-top: 65px;
                padding-bottom: 110px;
            }

            .game-score {
                font-size: 14px;
            }

            .control-btn {
                width: 36px;
                height: 36px;
                font-size: 14px;
            }

            .game-controls {
                gap: 6px;
            }

            .current-team {
                font-size: 16px;
                margin: 10px 0;
            }

            .category-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .category-btn {
                padding: 12px 8px;
                min-height: 75px;
            }

            .category-icon {
                font-size: 20px;
            }
            
            .game-card {
                width: 90vw;
                height: 35vh;
                font-size: 18px;
                padding: 15px;
            }

            .game-timer {
                width: 40vw;
                height: 60px;
                font-size: 24px;
                bottom: 12px;
            }

            .difficulty-selector {
                gap: 10px;
                padding: 15px 10px;
            }

            .difficulty-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            .difficulty-display {
                min-width: 110px;
                padding: 12px;
            }

            .difficulty-level {
                font-size: 24px;
            }

            .difficulty-name {
                font-size: 14px;
            }

            .setting-control {
                gap: 12px;
            }

            .setting-btn {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }

            .setting-value {
                min-width: 60px;
                font-size: 18px;
                padding: 6px 12px;
            }

            .bottom-menu {
                gap: 12px;
                padding: 8px;
            }

            .bottom-menu-item {
                min-width: 48px;
                padding: 8px;
            }

            .bottom-menu-item .icon {
                font-size: 18px;
            }

            .bottom-menu-item .label {
                font-size: 8px;
            }

            .swipe-hints {
                max-width: 300px;
                margin-top: 15px;
            }

            .swipe-hint {
                padding: 10px 12px;
                font-size: 12px;
                gap: 6px;
            }

            .loader-progress {
                width: 220px;
                height: 8px;
            }

            .loader-logo {
                font-size: 32px;
                margin-bottom: 25px;
            }
        }

        @media (max-height: 600px) {
            .game-content {
                padding-bottom: 100px;
            }
            
            .game-card {
                height: 30vh;
            }

            .game-timer {
                height: 50px;
                font-size: 20px;
                bottom: 10px;
            }
        }

        /* –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–µ —ç–∫—Ä–∞–Ω—ã */
        @media (max-width: 320px) {
            .game-header {
                padding: 8px 10px;
                height: 50px;
            }

            .game-content {
                padding-top: 60px;
                padding-bottom: 100px;
            }

            .control-btn {
                width: 32px;
                height: 32px;
                font-size: 12px;
            }

            .game-score {
                font-size: 13px;
            }

            .game-timer {
                width: 35vw;
                height: 50px;
                font-size: 18px;
            }

            .category-grid {
                gap: 8px;
            }

            .category-btn {
                padding: 8px 6px;
                min-height: 65px;
            }
        }
    </style>
</head>
<body>
    <!-- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é –∑–≤—É–∫–∞ -->
    <div class="sound-dropdown" id="soundDropdown">
        <button class="sound-dropdown-toggle" onclick="toggleSoundDropdown()">üîä</button>
        <div class="sound-dropdown-menu">
            <div class="sound-dropdown-item" onclick="toggleGlobalSound()">
                <span id="soundToggleIcon">üîä</span>
                <span id="soundToggleText">–í–∫–ª –∑–≤—É–∫</span>
            </div>
            <div class="sound-dropdown-item" onclick="showSoundModal()">
                <span>‚öôÔ∏è</span>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </div>
        </div>
    </div>

    <!-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ª–æ–∞–¥–µ—Ä -->
    <div id="loader" class="loader">
        <div class="loader-logo">üéØ Alias Game</div>
        <div class="loader-progress">
            <div class="loader-progress-bar"></div>
        </div>
        <div class="loader-text">–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–≥—Ä–∞...</div>
    </div>

    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="mainMenu" class="page">
            <h1>Alias Game</h1>
            <button class="menu-button" onclick="startNewGame()">üéÆ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="menu-button" id="continueBtn" disabled>‚èØÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
            <button class="menu-button" onclick="showPage('rules')">üìñ –ü—Ä–∞–≤–∏–ª–∞</button>
            <button class="menu-button" onclick="showPage('partnerTasks')">üéØ –ó–∞–¥–∞–Ω–∏—è –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤</button>
            
            <!-- –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –∏–∫–æ–Ω–æ–∫ -->
            <div class="bottom-menu">
                <div class="bottom-menu-item" onclick="showSoundModal()">
                    <div class="icon">üîä</div>
                    <div class="label">–ó–≤—É–∫</div>
                    <div class="tooltip">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–∞</div>
                </div>
                <div class="bottom-menu-item" onclick="showPage('dispace')">
                    <div class="icon">üöÄ</div>
                    <div class="label">DiSpace</div>
                    <div class="tooltip">–û –∫–æ–º–ø–∞–Ω–∏–∏ DiSpace</div>
                </div>
                <div class="bottom-menu-item" onclick="showPage('ratings')">
                    <div class="icon">üèÜ</div>
                    <div class="label">–†–µ–π—Ç–∏–Ω–≥–∏</div>
                    <div class="tooltip">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</div>
                </div>
                <div class="bottom-menu-item" onclick="showPage('rewards')">
                    <div class="icon">üéÅ</div>
                    <div class="label">–ù–∞–≥—Ä–∞–¥—ã</div>
                    <div class="tooltip">–ú–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</div>
                </div>
            </div>
            
            <!-- –û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤–Ω–∏–∑—É -->
            <div class="main-menu-about">
                <h3>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h3>
                <p>Alias Game - —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–Ω–∞—è –∏–≥—Ä–∞, –≥–¥–µ –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–≤–∞, –Ω–µ –Ω–∞–∑—ã–≤–∞—è –∏—Ö –Ω–∞–ø—Ä—è–º—É—é.</p>
                <p>–ò–≥—Ä–∞–π—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã –∏ —É—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ —Ç—É—Ä–Ω–∏—Ä–∞—Ö!</p>
                <p><strong>–í–µ—Ä—Å–∏—è:</strong> 2.1.0</p>
                <p><strong>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:</strong> ¬© 2024 DiSpace</p>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ -->
        <div id="teamSetup" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥</h2>
            <div id="teamList" class="team-list"></div>
            <div class="add-team-btn" onclick="addTeam()">+</div>
            <button class="menu-button" onclick="showPage('categorySelect')">–î–∞–ª–µ–µ ‚Üí</button>
        </div>

        <!-- –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
        <div id="categorySelect" class="page">
            <div class="back-button" onclick="showPage('teamSetup')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h2>
            <div class="theme-warning" id="themeWarning">
                ‚ö†Ô∏è –í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Ç–µ–º—É –¥–ª—è –∏–≥—Ä—ã!
            </div>
            
            <h3>–°–ª–æ–∂–Ω–æ—Å—Ç—å</h3>
            <div class="difficulty-selector">
                <button class="difficulty-btn" onclick="adjustDifficulty(-1)">‚àí</button>
                <div class="difficulty-display">
                    <div class="difficulty-level" id="difficultyLevel">üü¢</div>
                    <div class="difficulty-name" id="difficultyName">–õ–µ–≥–∫–∏–π</div>
                    <div class="difficulty-desc" id="difficultyDesc">–ü—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞</div>
                </div>
                <button class="difficulty-btn" onclick="adjustDifficulty(1)">+</button>
            </div>
            
            <h3>–¢–µ–º—ã</h3>
            <div class="category-grid">
                <button class="category-btn" data-type="theme" data-value="cities">
                    <div class="category-icon">üèôÔ∏è</div>
                    <div>–ì–æ—Ä–æ–¥–∞</div>
                    <div class="category-tooltip">–ì–æ—Ä–æ–¥–∞ –º–∏—Ä–∞</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="capitals">
                    <div class="category-icon">üèõÔ∏è</div>
                    <div>–°—Ç–æ–ª–∏—Ü—ã</div>
                    <div class="category-tooltip">–°—Ç–æ–ª–∏—Ü—ã —Å—Ç—Ä–∞–Ω</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="general">
                    <div class="category-icon">üìö</div>
                    <div>–û–±—â–∏–µ —Å–ª–æ–≤–∞</div>
                    <div class="category-tooltip">–†–∞–∑–Ω—ã–µ —Ç–µ–º—ã</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="harry_potter">
                    <div class="category-icon">‚ö°</div>
                    <div>–ì–∞—Ä—Ä–∏ –ü–æ—Ç—Ç–µ—Ä</div>
                    <div class="category-tooltip">–ú–∏—Ä –º–∞–≥–∏–∏</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="lotr">
                    <div class="category-icon">üíç</div>
                    <div>–í–ª–∞—Å—Ç–µ–ª–∏–Ω –∫–æ–ª–µ—Ü</div>
                    <div class="category-tooltip">–°—Ä–µ–¥–∏–∑–µ–º—å–µ</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="celebrities">
                    <div class="category-icon">‚≠ê</div>
                    <div>–ó–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏</div>
                    <div class="category-tooltip">–ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ª—é–¥–∏</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="tech">
                    <div class="category-icon">üíª</div>
                    <div>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</div>
                    <div class="category-tooltip">IT –∏ –≥–∞–¥–∂–µ—Ç—ã</div>
                </button>
                <button class="category-btn" data-type="theme" data-value="science">
                    <div class="category-icon">üî¨</div>
                    <div>–ù–∞—É–∫–∞</div>
                    <div class="category-tooltip">–ù–∞—É—á–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã</div>
                </button>
            </div>
            <button class="menu-button" onclick="proceedToGameSettings()">–î–∞–ª–µ–µ ‚Üí</button>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã -->
        <div id="gameSettings" class="page">
            <div class="back-button" onclick="showPage('categorySelect')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã</h2>
            
            <div class="settings-group">
                <label>–í—Ä–µ–º—è —Ä–∞—É–Ω–¥–∞</label>
                <div class="setting-control">
                    <button class="setting-btn" onclick="adjustSetting('roundTime', -10)">‚àí</button>
                    <div class="setting-value" id="roundTimeValue">60 —Å–µ–∫</div>
                    <button class="setting-btn" onclick="adjustSetting('roundTime', 10)">+</button>
                </div>
            </div>

            <div class="settings-group">
                <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –¥–ª—è –ø–æ–±–µ–¥—ã</label>
                <div class="setting-control">
                    <button class="setting-btn" onclick="adjustSetting('winScore', -5)">‚àí</button>
                    <div class="setting-value" id="winScoreValue">30</div>
                    <button class="setting-btn" onclick="adjustSetting('winScore', 5)">+</button>
                </div>
            </div>

            <div class="settings-group">
                <label>–°—Ç–∞–≤–∫–∞ (–º–æ–Ω–µ—Ç—ã)</label>
                <input type="range" class="bet-slider" id="betSlider" min="0" max="100" value="0" oninput="updateBetValue(this.value)">
                <div class="bet-value" id="betValue">0 –º–æ–Ω–µ—Ç</div>
            </div>

            <div class="checkbox-group">
                <input type="checkbox" id="skipPenalty">
                <label for="skipPenalty">–®—Ç—Ä–∞—Ñ –∑–∞ –ø—Ä–æ–ø—É—Å–∫ —Å–ª–æ–≤–∞ (-1 –æ—á–∫–æ)</label>
            </div>

            <button class="menu-button" onclick="startGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div id="gameScreen" class="page game-screen">
            <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à–∞–ø–∫–∞ -->
            <div class="game-header">
                <div class="game-score" id="headerScore">–û—á–∫–∏: 0</div>
                <div class="game-controls">
                    <button class="control-btn" id="gameSoundToggle" onclick="toggleGameSound()">üîä</button>
                    <button class="control-btn" onclick="pauseGame()">‚è∏Ô∏è</button>
                    <button class="control-btn" onclick="exitToMenu()">üè†</button>
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∏–≥—Ä—ã -->
            <div class="game-content">
                <!-- –§–æ–Ω–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
                <div class="swipe-background">
                    <div class="swipe-bg-left" id="swipeBgLeft">‚ùå –ü–†–û–ü–£–°–¢–ò–¢–¨</div>
                    <div class="swipe-bg-right" id="swipeBgRight">–û–¢–ì–ê–î–ê–ù–û ‚úÖ</div>
                </div>
                
                <div class="current-team" id="currentTeam">–ö–æ–º–∞–Ω–¥–∞ 1</div>
                
                <div class="game-area">
                    <div class="game-card" id="gameCard">
                        <div class="swipe-indicators">
                            <div class="swipe-indicator left">‚ùå</div>
                            <div class="swipe-indicator right">‚úÖ</div>
                        </div>
                        <span id="cardText">–ì–æ—Ç–æ–≤?</span>
                    </div>
                    
                    <!-- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
                    <div class="swipe-hints" id="swipeHints">
                        <div class="swipe-hint ready">
                            <span>–°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ ‚Üí</span>
                            <span>–ì–æ—Ç–æ–≤!</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä -->
            <div class="game-timer" id="gameTimer" style="display: none;">60</div>
        </div>

        <!-- –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="roundResults" class="page">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞</h2>
            <div id="resultsList" class="results-list"></div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="correctCount">0</div>
                    <div class="stat-label">–£–≥–∞–¥–∞–Ω–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="incorrectCount">0</div>
                    <div class="stat-label">–ü—Ä–æ–ø—É—â–µ–Ω–æ</div>
                </div>
            </div>
            <button class="menu-button" onclick="nextRound()">–î–∞–ª–µ–µ ‚Üí</button>
        </div>

        <!-- –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="finalResults" class="page victory-page">
            <div class="victory-content">
                <h2 class="victory-title">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
                <h1 class="victory-winner" id="winnerName">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å</h1>
                <div class="victory-stats">
                    <div class="victory-stat">
                        <div class="victory-stat-value" id="finalScore">0</div>
                        <div class="victory-stat-label">–û—á–∫–æ–≤ –Ω–∞–±—Ä–∞–Ω–æ</div>
                    </div>
                    <div class="victory-stat">
                        <div class="victory-stat-value" id="prizeAmount">0</div>
                        <div class="victory-stat-label">–ü—Ä–∏–∑–æ–≤–æ–π —Ñ–æ–Ω–¥</div>
                    </div>
                </div>
                <div class="qr-code">
                    <span>üéÅ QR-–∫–æ–¥ –Ω–∞–≥—Ä–∞–¥—ã üéÅ</span>
                </div>
                <button class="menu-button victory-button" onclick="showPage('mainMenu')">üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
            </div>
        </div>

        <!-- DiSpace -->
        <div id="dispace" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>DiSpace</h2>
            <p>DiSpace - —Ü–∏—Ñ—Ä–æ–≤–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞ –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–π. –û–±—ä–µ–¥–∏–Ω—è–µ–º –ª—É—á—à–∏–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –µ–¥–∏–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ:</p>
            <ul style="margin: 20px; line-height: 2; padding-left: 20px;">
                <li>Digital Bar</li>
                <li>Game Bar</li>
                <li>Digital Hotel</li>
                <li>Digital Cafe</li>
                <li>Digital Trip</li>
                <li>Digital Music</li>
                <li>Digital Sharing</li>
                <li>Digital Health</li>
                <li>Digital Delivery</li>
            </ul>
        </div>

        <!-- –†–µ–π—Ç–∏–Ω–≥–∏ -->
        <div id="ratings" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–†–µ–π—Ç–∏–Ω–≥–∏</h2>
            <div id="ratingsList">
                <p>–†–µ–π—Ç–∏–Ω–≥–∏ –∏–≥—Ä–æ–∫–æ–≤ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –∏–≥—Ä.</p>
            </div>
        </div>

        <!-- –ó–∞–¥–∞–Ω–∏—è –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ -->
        <div id="partnerTasks" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–ó–∞–¥–∞–Ω–∏—è –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤</h2>
            <p>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–≥—Ä—ã –æ—Ç –Ω–∞—à–∏—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å —Å–∫–æ—Ä–æ!</p>
        </div>

        <!-- –ù–∞–≥—Ä–∞–¥—ã -->
        <div id="rewards" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–ú–æ–∏ –Ω–∞–≥—Ä–∞–¥—ã</h2>
            <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ –Ω–∞–≥—Ä–∞–¥—ã.</p>
        </div>

        <!-- –ü—Ä–∞–≤–∏–ª–∞ -->
        <div id="rules" class="page">
            <div class="back-button" onclick="showPage('mainMenu')">‚Üê –ù–∞–∑–∞–¥</div>
            <h2>–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
            <p><strong>–¶–µ–ª—å –∏–≥—Ä—ã:</strong> –û–±—ä—è—Å–Ω–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ —Å–ª–æ–≤ —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥–µ –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è.</p>
            <p style="margin: 20px 0;"><strong>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</strong></p>
            <ol style="margin: 20px; line-height: 2; padding-left: 20px;">
                <li>–†–∞–∑–¥–µ–ª–∏—Ç–µ—Å—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã</li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–ª–æ–≤ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å</li>
                <li>–û–±—ä—è—Å–Ω—è–π—Ç–µ —Å–ª–æ–≤–∞, –Ω–µ –Ω–∞–∑—ã–≤–∞—è –∏—Ö –∏ –æ–¥–Ω–æ–∫–æ—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞</li>
                <li>–°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ - —Å–ª–æ–≤–æ —É–≥–∞–¥–∞–Ω–æ (+1 –æ—á–∫–æ)</li>
                <li>–°–≤–∞–π–ø –≤–ª–µ–≤–æ - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–ª–æ–≤–æ</li>
                <li>–ü–æ–±–µ–∂–¥–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞, –Ω–∞–±—Ä–∞–≤—à–∞—è –±–æ–ª—å—à–µ –≤—Å–µ—Ö –æ—á–∫–æ–≤, –Ω–æ –Ω–µ –º–µ–Ω–µ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –º–∏–Ω–∏–º—É–º–∞</li>
            </ol>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã -->
        <div id="teamModal" class="modal">
            <div class="modal-content">
                <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É</h3>
                <input type="text" id="teamNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã">
                <div class="modal-buttons">
                    <button class="save" onclick="saveTeamName()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="delete" onclick="deleteTeam()">–£–¥–∞–ª–∏—Ç—å</button>
                    <button class="cancel" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—É–∑—ã -->
        <div id="pauseModal" class="modal">
            <div class="modal-content">
                <h3>–ò–≥—Ä–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</h3>
                <button class="menu-button" onclick="resumeGame()">‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                <button class="menu-button" onclick="exitToMenuConfirm()">üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∑–≤—É–∫–∞ -->
        <div id="soundModal" class="modal sound-modal">
            <div class="modal-content">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–∞</h3>
                
                <div class="volume-control">
                    <label>–ó–≤—É–∫–∏ —Å–≤–∞–π–ø–æ–≤:</label>
                    <input type="range" id="swipeVolume" min="0" max="100" value="60">
                    <span class="volume-value" id="swipeVolumeValue">60%</span>
                </div>

                <div class="volume-control">
                    <label>–ó–≤—É–∫–∏ —Ç–∞–π–º–µ—Ä–∞:</label>
                    <input type="range" id="timerVolume" min="0" max="100" value="80">
                    <span class="volume-value" id="timerVolumeValue">80%</span>
                </div>

                <div class="modal-buttons">
                    <button class="menu-button" onclick="testSounds()">üîä –¢–µ—Å—Ç –∑–≤—É–∫–æ–≤</button>
                    <button class="cancel" onclick="closeModal()">–ì–æ—Ç–æ–≤–æ</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let teams = [];
        let currentTeamIndex = 0;
        let currentWord = '';
        let timer = null;
        let timeLeft = 60;
        let gameWords = [];
        let usedWords = new Set();
        let roundWords = { correct: [], incorrect: [] };
        let gameSettings = {
            roundTime: 60,
            winScore: 30,
            skipPenalty: false,
            betAmount: 0,
            difficulty: 0
        };
        let currentEditingTeam = null;
        let isDragging = false;
        let startX = 0;
        let currentX = 0;
        let isPaused = false;
        let gameEnded = false;
        let gameStarted = false;
        let soundSettings = {
            swipe: 60,
            timer: 80,
            enabled: true
        };
        let soundDropdownOpen = false;

        // –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥
        const randomTeamNames = [
            '–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ï–¥–∏–Ω–æ—Ä–æ–≥–∏', '–¢–∞–Ω—Ü—É—é—â–∏–µ –†–æ–±–æ—Ç—ã', '–õ–µ—Ç–∞—é—â–∏–µ –ï–Ω–µ–∫–∏', '–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –ü–∏–Ω–≥–≤–∏–Ω—ã',
            '–°–≤–µ—Ä–∫–∞—é—â–∏–µ –î—Ä–∞–∫–æ–Ω—ã', '–ú—É–¥—Ä—ã–µ –°–æ–≤—É—à–∫–∏', '–°–º–µ–ª—ã–µ –•–æ–º—è–∫–∏', '–í–µ—Å—ë–ª—ã–µ –ü–∞–Ω–¥—ã',
            '–ë—ã—Å—Ç—Ä—ã–µ –õ–∏—Å–∏—á–∫–∏', '–£–º–Ω—ã–µ –ö—Ä–æ—Ç—ã', '–î–æ–±—Ä—ã–µ –ú–µ–¥–≤–µ–¥–∏', '–•—Ä–∞–±—Ä—ã–µ –ó–∞–π—Ü—ã',
            '–û–∑–æ—Ä–Ω—ã–µ –ë–µ–ª–∫–∏', '–ú–µ—á—Ç–∞—é—â–∏–µ –°–ª–æ–Ω—ã', '–ü–æ—é—â–∏–µ –î–µ–ª—å—Ñ–∏–Ω—ã', '–ò–≥—Ä–∏–≤—ã–µ –ö–æ—Ç–∏–∫–∏',
            '–†–∞–¥—É–∂–Ω—ã–µ –ë–∞–±–æ—á–∫–∏', '–°–æ–ª–Ω–µ—á–Ω—ã–µ –õ—å–≤—ã', '–õ—É–Ω–Ω—ã–µ –í–æ–ª–∫–∏', '–ó–≤—ë–∑–¥–Ω—ã–µ –¢–∏–≥—Ä—ã',
            '–ò–∑—É–º—Ä—É–¥–Ω—ã–µ –Å–∂–∏–∫–∏', '–ó–æ–ª–æ—Ç—ã–µ –û—Ä–ª—ã', '–°–µ—Ä–µ–±—Ä—è–Ω—ã–µ –ê–∫—É–ª—ã', '–ê–ª–º–∞–∑–Ω—ã–µ –§–ª–∞–º–∏–Ω–≥–æ',
            '–ù–µ–æ–Ω–æ–≤—ã–µ –ñ–∏—Ä–∞—Ñ—ã', '–ü–ª–∞–∑–º–µ–Ω–Ω—ã–µ –ö–µ–Ω–≥—É—Ä—É', '–õ–∞–∑–µ—Ä–Ω—ã–µ –ß–µ—Ä–µ–ø–∞—Ö–∏', '–ö–∏–±–µ—Ä –ö–æ–∞–ª—ã'
        ];

        // –°–ª–æ–≤–∞—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        const difficultyLevels = [
            { level: 'üü¢', name: '–õ–µ–≥–∫–∏–π', desc: '–ü—Ä–æ—Å—Ç—ã–µ —Å–ª–æ–≤–∞', value: 'easy' },
            { level: 'üü°', name: '–°—Ä–µ–¥–Ω–∏–π', desc: '–û–±—ã—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å', value: 'medium' },
            { level: 'üü†', name: '–°–ª–æ–∂–Ω—ã–π', desc: '–°–ª–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞', value: 'hard' },
            { level: 'üî¥', name: '–≠–∫—Å—Ç—Ä–∏–º', desc: '–û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ!', value: 'extreme' }
        ];

        // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏ —Å–ª–æ–≤
        const wordDictionaries = {
            easy: {
                general: ['—Å—Ç–æ–ª', '—Å—Ç—É–ª', '–¥–æ–º', '–∫–æ—Ç', '—Å–æ–±–∞–∫–∞', '–¥–µ—Ä–µ–≤–æ', '—Å–æ–ª–Ω—Ü–µ', '–ª—É–Ω–∞', '–≤–æ–¥–∞', '–æ–≥–æ–Ω—å', '–∫–Ω–∏–≥–∞', '—Ä—É—á–∫–∞', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∫–æ–º–ø—å—é—Ç–µ—Ä', '–º–∞—à–∏–Ω–∞', '–∞–≤—Ç–æ–±—É—Å', '–ø–æ–µ–∑–¥', '—Å–∞–º–æ–ª–µ—Ç', '–∫–æ—Ä–∞–±–ª—å', '–≤–µ–ª–æ—Å–∏–ø–µ–¥', '—á–∞—Å—ã', '–∑–µ—Ä–∫–∞–ª–æ', '–æ–∫–Ω–æ', '–¥–≤–µ—Ä—å', '—Å—Ç–µ–Ω–∞', '–ø–æ–ª', '–ø–æ—Ç–æ–ª–æ–∫', '–∫—Ä—ã—à–∞', '–ª–µ—Å—Ç–Ω–∏—Ü–∞', '–ª–∏—Ñ—Ç', '–º–∞–≥–∞–∑–∏–Ω', '—à–∫–æ–ª–∞', '–±–æ–ª—å–Ω–∏—Ü–∞', '—Ç–µ–∞—Ç—Ä', '–∫–∏–Ω–æ', '–ø–∞—Ä–∫', '—Ä–µ–∫–∞', '–æ–∑–µ—Ä–æ', '–º–æ—Ä–µ', '–≥–æ—Ä–∞', '–ª–µ—Å', '–ø–æ–ª–µ', '—Å–∞–¥', '—Ü–≤–µ—Ç–æ–∫', '—Ç—Ä–∞–≤–∞', '–ª–∏—Å—Ç—å—è', '–≤–µ—Ç–∫–∞', '–∫–æ—Ä–µ–Ω—å', '–∫–∞–º–µ–Ω—å'],
                cities: ['–ú–æ—Å–∫–≤–∞', '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', '–ö–∞–∑–∞–Ω—å', '–ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥', '–ß–µ–ª—è–±–∏–Ω—Å–∫', '–°–∞–º–∞—Ä–∞', '–û–º—Å–∫', '–†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É', '–£—Ñ–∞', '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫', '–í–æ—Ä–æ–Ω–µ–∂', '–ü–µ—Ä–º—å', '–í–æ–ª–≥–æ–≥—Ä–∞–¥', '–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä', '–°–∞—Ä–∞—Ç–æ–≤', '–¢—é–º–µ–Ω—å', '–¢–æ–ª—å—è—Ç—Ç–∏', '–ò–∂–µ–≤—Å–∫'],
                capitals: ['–ú–æ—Å–∫–≤–∞', '–í–∞—à–∏–Ω–≥—Ç–æ–Ω', '–õ–æ–Ω–¥–æ–Ω', '–ü–∞—Ä–∏–∂', '–ë–µ—Ä–ª–∏–Ω', '–†–∏–º', '–ú–∞–¥—Ä–∏–¥', '–õ–∏—Å—Å–∞–±–æ–Ω', '–ê–º—Å—Ç–µ—Ä–¥–∞–º', '–ë—Ä—é—Å—Å–µ–ª—å', '–í–µ–Ω–∞', '–ë–µ—Ä–Ω', '–°—Ç–æ–∫–≥–æ–ª—å–º', '–û—Å–ª–æ', '–ö–æ–ø–µ–Ω–≥–∞–≥–µ–Ω', '–•–µ–ª—å—Å–∏–Ω–∫–∏', '–í–∞—Ä—à–∞–≤–∞', '–ü—Ä–∞–≥–∞', '–ë—Ä–∞—Ç–∏—Å–ª–∞–≤–∞', '–ë—É–¥–∞–ø–µ—à—Ç'],
                tech: ['–∫–æ–º–ø—å—é—Ç–µ—Ä', '—Ç–µ–ª–µ—Ñ–æ–Ω', '—Å–º–∞—Ä—Ç—Ñ–æ–Ω', '–ø–ª–∞–Ω—à–µ—Ç', '–Ω–æ—É—Ç–±—É–∫', '–∏–Ω—Ç–µ—Ä–Ω–µ—Ç', '—Å–∞–π—Ç', '–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ', '–ø—Ä–æ–≥—Ä–∞–º–º–∞', '–∫–æ–¥', '–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞', '–º—ã—à—å', '–º–æ–Ω–∏—Ç–æ—Ä', '—ç–∫—Ä–∞–Ω', '–ø—Ä–∏–Ω—Ç–µ—Ä', '—Å–∫–∞–Ω–µ—Ä', '–∫–∞–º–µ—Ä–∞', '–º–∏–∫—Ä–æ—Ñ–æ–Ω', '–∫–æ–ª–æ–Ω–∫–∏', '–Ω–∞—É—à–Ω–∏–∫–∏']
            },
            medium: {
                general: ['–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è', '–∞–º–±–∏—Ü–∏—è', '–∞–Ω–∞–ª–∏–∑', '–∞—Ä–≥—É–º–µ–Ω—Ç', '–∞—Ç–º–æ—Å—Ñ–µ—Ä–∞', '–±–∞–ª–∞–Ω—Å', '–±–∞—Ä—å–µ—Ä', '–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ', '–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ', '–≤–ª–∏—è–Ω–∏–µ', '–≤–æ–æ–±—Ä–∞–∂–µ–Ω–∏–µ', '–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ', '–≥–∞—Ä–º–æ–Ω–∏—è', '–≥–∏–ø–æ—Ç–µ–∑–∞', '–¥–∏–ª–µ–º–º–∞', '–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞', '–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ', '–µ–¥–∏–Ω—Å—Ç–≤–æ', '–∂–µ—Ä—Ç–≤–∞', '–∑–∞–±–æ—Ç–∞'],
                celebrities: ['–ü—É—à–∫–∏–Ω', '–¢–æ–ª—Å—Ç–æ–π', '–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π', '–ß–µ—Ö–æ–≤', '–ì–æ–≥–æ–ª—å', '–õ–µ—Ä–º–æ–Ω—Ç–æ–≤', '–¢—É—Ä–≥–µ–Ω–µ–≤', '–ù–µ–∫—Ä–∞—Å–æ–≤', '–ö—Ä—ã–ª–æ–≤', '–≠–π–Ω—à—Ç–µ–π–Ω', '–ù—å—é—Ç–æ–Ω', '–î–∞—Ä–≤–∏–Ω', '–ì–∞–ª–∏–ª–µ–π', '–ö–æ–ø–µ—Ä–Ω–∏–∫', '–ö–µ–ø–ª–µ—Ä', '–ú–µ–Ω–¥–µ–ª–µ–µ–≤', '–õ–æ–º–æ–Ω–æ—Å–æ–≤', '–ü–∞–≤–ª–æ–≤', '–®–µ–∫—Å–ø–∏—Ä', '–î–∞–Ω—Ç–µ'],
                science: ['–≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è', '—ç–≤–æ–ª—é—Ü–∏—è', '—Ñ–æ—Ç–æ—Å–∏–Ω—Ç–µ–∑', '–∞—Ç–æ–º', '–º–æ–ª–µ–∫—É–ª–∞', '—ç–Ω–µ—Ä–≥–∏—è', '—ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ', '–º–∞–≥–Ω–µ—Ç–∏–∑–º', '—Ä–∞–¥–∏–∞—Ü–∏—è', '–∫–≤–∞–Ω—Ç', '—Ñ–æ—Ç–æ–Ω', '—ç–ª–µ–∫—Ç—Ä–æ–Ω', '–ø—Ä–æ—Ç–æ–Ω', '–Ω–µ–π—Ç—Ä–æ–Ω', '—è–¥—Ä–æ', '–∏–∑–æ—Ç–æ–ø', '—ç–ª–µ–º–µ–Ω—Ç', '—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ', '—Ä–µ–∞–∫—Ü–∏—è', '–∫–∞—Ç–∞–ª–∏–∑']
            },
            hard: {
                general: ['–ø–∞—Ä–∞–¥–æ–∫—Å', '–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è', '–∫–æ–Ω—Ü–µ–ø—Ü–∏—è', '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è', '–º–µ—Ç–∞—Ñ–æ—Ä–∞', '–∞–ª–ª–µ–≥–æ—Ä–∏—è', '—Å–∏–º–≤–æ–ª–∏–∑–º', '–º–µ—Ç–æ–Ω–∏–º–∏—è', '—Å–∏–Ω–µ–∫–¥–æ—Ö–∞', '–æ–∫—Å—é–º–æ—Ä–æ–Ω', '–∞–Ω—Ç–∏—Ç–µ–∑–∞', '–≥–∏–ø–µ—Ä–±–æ–ª–∞', '–ª–∏—Ç–æ—Ç–∞', '–∏—Ä–æ–Ω–∏—è', '—Å–∞—Ä–∫–∞–∑–º', '—ç–≤—Ñ–µ–º–∏–∑–º'],
                harry_potter: ['–•–æ–≥–≤–∞—Ä—Ç—Å', '–∫–≤–∏–¥–¥–∏—á', '–ø–∞—Ç—Ä–æ–Ω—É—Å', '–∫—Ä–µ—Å—Ç—Ä–∞–∂', '–¥–µ–º–µ–Ω—Ç–æ—Ä', '–º–∞–≥–ª', '–≤–æ–ª—à–µ–±–Ω–∞—è –ø–∞–ª–æ—á–∫–∞', '–ì—Ä–∏—Ñ—Ñ–∏–Ω–¥–æ—Ä', '–°–ª–∏–∑–µ—Ä–∏–Ω', '–ö–æ–≥—Ç–µ–≤—Ä–∞–Ω', '–ü—É—Ñ—Ñ–µ–Ω–¥—É–π', '–í–æ–ª–¥–µ–º–æ—Ä—Ç', '–î–∞–º–±–ª–¥–æ—Ä', '–°–Ω–µ–π–ø', '–ú–∞–∫–ì–æ–Ω–∞–≥–∞–ª–ª', '–•–∞–≥—Ä–∏–¥'],
                lotr: ['–°—Ä–µ–¥–∏–∑–µ–º—å–µ', '—Ö–æ–±–±–∏—Ç', '–ì–æ–Ω–¥–æ—Ä', '–ú–æ—Ä–¥–æ—Ä', '—ç–ª—å—Ñ', '–æ—Ä–∫', '–®–∏—Ä', '–ò–∑–µ–Ω–≥–∞—Ä–¥', '–†–æhan', '–ú–∏–Ω–∞—Å –¢–∏—Ä–∏—Ç', '–ú–∏–Ω–∞—Å –ú–æ—Ä–≥—É–ª', '–ë–∞—Ä–∞–¥-–¥—É—Ä', '–û—Ä—Ç—Ö–∞–Ω–∫', '–≠–¥–æ—Ä–∞—Å', '–•–µ–ª—å–º–æ–≤–∞ –ü–∞–¥—å', '–§–∞–Ω–≥–æ—Ä–Ω']
            },
            extreme: {
                general: ['—ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª–∏–∑–º', '—Ñ–µ–Ω–æ–º–µ–Ω–æ–ª–æ–≥–∏—è', '–≥–µ—Ä–º–µ–Ω–µ–≤—Ç–∏–∫–∞', '—ç–ø–∏—Å—Ç–µ–º–æ–ª–æ–≥–∏—è', '–æ–Ω—Ç–æ–ª–æ–≥–∏—è', '–≥–Ω–æ—Å–µ–æ–ª–æ–≥–∏—è', '–∞–∫—Å–∏–æ–ª–æ–≥–∏—è', '–¥–∏—Å–∫—É—Ä—Å', '–ø–∞—Ä–∞–¥–∏–≥–º–∞', '—Å–∏–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞'],
                harry_potter: ['–ê–≤–∞–¥–∞ –ö–µ–¥–∞–≤—Ä–∞', '–≠–∫—Å–ø–µ–ª–ª–∏–∞—Ä–º—É—Å', '–≠–∫—Å–ø–µ–∫—Ç–æ –ü–∞—Ç—Ä–æ–Ω—É–º', '–¢—É—Ä–Ω–∏—Ä –¢—Ä–µ—Ö –í–æ–ª—à–µ–±–Ω–∏–∫–æ–≤', '–ö—É–±–æ–∫ –û–≥–Ω—è', '–ó–æ–ª–æ—Ç–æ–π –°–Ω–∏—Ç—á', '–ö–≤–∞—Ñ–ª', '–ë–ª–∞–¥–∂–µ—Ä', '–ú–∞—Ä–æ–¥–µ—Ä—Å–∫–∞—è –∫–∞—Ä—Ç–∞', '–¢–∞–π–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞'],
                lotr: ['–≠–ª—å—Ä–æ–Ω–¥', '–ì–∞–ª–∞–¥—Ä–∏—ç–ª—å', '–°–∞—É—Ä–æ–Ω', '–°–∞—Ä—É–º–æ–Ω', '–õ–µ–≥–æ–ª–∞—Å', '–ì–∏–º–ª–∏', '–ë–æ—Ä–æ–º–∏—Ä', '–ê—Ä–∞–≥–æ—Ä–Ω', '–§—Ä–æ–¥–æ', '–°—ç–º']
            }
        };

        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        function playTone(frequency, duration, volume = 50) {
            if (!soundSettings.enabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = frequency;
                oscillator.type = 'sine';
                
                const finalVolume = (volume / 100) * 0.1;
                
                gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                gainNode.gain.linearRampToValueAtTime(finalVolume, audioContext.currentTime + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration / 1000);
            } catch (e) {
                console.warn('–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∑–≤—É–∫:', e);
            }
        }

        // –ó–≤—É–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function playSwipeSound(isCorrect) {
            const frequency = isCorrect ? 440 : 165;  // –ü—Ä–∞–≤–∏–ª—å–Ω–æ = 440Hz, –ü—Ä–æ–ø—É—Å–∫ = 165Hz
            playTone(frequency, 200, soundSettings.swipe);
        }

        function playTimerSound() {
            playTone(880, 100, soundSettings.timer);
        }

        function playCountdownSound() {
            playTone(330, 300, soundSettings.timer);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('mainMenu').classList.add('active');
            }, 3000);

            loadSoundSettings();

            teams = [
                { name: getRandomTeamName(), score: 0 },
                { name: getRandomTeamName(), score: 0 }
            ];
            renderTeams();

            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', toggleCategory);
            });

            setupCardSwipe();
            setupSoundControls();
            updateSoundDropdown();
            initGameSettings();
            initDifficultySelector();

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.sound-dropdown')) {
                    closeSoundDropdown();
                }
            });
        }

        function getRandomTeamName() {
            let usedNames = teams.map(team => team.name);
            let availableNames = randomTeamNames.filter(name => !usedNames.includes(name));
            if (availableNames.length === 0) availableNames = randomTeamNames;
            return availableNames[Math.floor(Math.random() * availableNames.length)];
        }

        function toggleSoundDropdown() {
            const dropdown = document.getElementById('soundDropdown');
            soundDropdownOpen = !soundDropdownOpen;
            
            if (soundDropdownOpen) {
                dropdown.classList.add('active');
            } else {
                dropdown.classList.remove('active');
            }
        }

        function closeSoundDropdown() {
            document.getElementById('soundDropdown').classList.remove('active');
            soundDropdownOpen = false;
        }

        function updateSoundDropdown() {
            const toggle = document.querySelector('.sound-dropdown-toggle');
            const icon = document.getElementById('soundToggleIcon');
            const text = document.getElementById('soundToggleText');
            const item = document.querySelector('.sound-dropdown-item');
            
            if (soundSettings.enabled) {
                toggle.textContent = 'üîä';
                icon.textContent = 'üîá';
                text.textContent = '–í—ã–∫–ª –∑–≤—É–∫';
                item.classList.remove('active');
            } else {
                toggle.textContent = 'üîá';
                icon.textContent = 'üîä';
                text.textContent = '–í–∫–ª –∑–≤—É–∫';
                item.classList.add('active');
            }
        }

        function loadSoundSettings() {
            const saved = localStorage.getItem('aliasSound');
            if (saved) {
                soundSettings = {...soundSettings, ...JSON.parse(saved)};
                updateSoundUI();
            }
        }

        function saveSoundSettings() {
            localStorage.setItem('aliasSound', JSON.stringify(soundSettings));
            updateSoundDropdown();
        }

        function setupSoundControls() {
            const controls = ['swipe', 'timer'];
            controls.forEach(type => {
                const slider = document.getElementById(`${type}Volume`);
                const value = document.getElementById(`${type}VolumeValue`);
                
                if (slider && value) {
                    slider.value = soundSettings[type];
                    value.textContent = slider.value + '%';
                    
                    slider.addEventListener('input', (e) => {
                        const val = e.target.value;
                        soundSettings[type] = parseInt(val);
                        value.textContent = val + '%';
                        saveSoundSettings();
                    });
                }
            });
        }

        function updateSoundUI() {
            const controls = ['swipe', 'timer'];
            controls.forEach(type => {
                const slider = document.getElementById(`${type}Volume`);
                const value = document.getElementById(`${type}VolumeValue`);
                
                if (slider && value) {
                    slider.value = soundSettings[type];
                    value.textContent = soundSettings[type] + '%';
                }
            });
        }

        function toggleGlobalSound() {
            soundSettings.enabled = !soundSettings.enabled;
            saveSoundSettings();
            updateSoundDropdown();
            closeSoundDropdown();
        }

        function toggleGameSound() {
            soundSettings.enabled = !soundSettings.enabled;
            saveSoundSettings();
            updateSoundDropdown();
        }

        function showSoundModal() {
            closeSoundDropdown();
            document.getElementById('soundModal').classList.add('active');
        }

        function testSounds() {
            setTimeout(() => playSwipeSound(true), 100);
            setTimeout(() => playSwipeSound(false), 600);
            setTimeout(() => playTimerSound(), 1200);
            setTimeout(() => playCountdownSound(), 1800);
        }

        function initGameSettings() {
            updateSettingDisplay('roundTime', gameSettings.roundTime + ' —Å–µ–∫');
            updateSettingDisplay('winScore', gameSettings.winScore);
            updateBetValue(gameSettings.betAmount);
        }

        function initDifficultySelector() {
            updateDifficultyDisplay();
        }

        function updateDifficultyDisplay() {
            const currentDiff = difficultyLevels[gameSettings.difficulty];
            document.getElementById('difficultyLevel').textContent = currentDiff.level;
            document.getElementById('difficultyName').textContent = currentDiff.name;
            document.getElementById('difficultyDesc').textContent = currentDiff.desc;
        }

        function adjustDifficulty(delta) {
            gameSettings.difficulty = Math.max(0, Math.min(difficultyLevels.length - 1, gameSettings.difficulty + delta));
            updateDifficultyDisplay();
        }

        function updateSettingDisplay(setting, value) {
            document.getElementById(setting + 'Value').textContent = value;
        }

        function adjustSetting(setting, delta) {
            if (setting === 'roundTime') {
                gameSettings.roundTime = Math.max(30, Math.min(180, gameSettings.roundTime + delta));
                updateSettingDisplay('roundTime', gameSettings.roundTime + ' —Å–µ–∫');
            } else if (setting === 'winScore') {
                gameSettings.winScore = Math.max(10, Math.min(100, gameSettings.winScore + delta));
                updateSettingDisplay('winScore', gameSettings.winScore);
            }
        }

        function updateBetValue(value) {
            gameSettings.betAmount = parseInt(value);
            document.getElementById('betValue').textContent = value + ' –º–æ–Ω–µ—Ç';
        }

        function showPage(pageId) {
            closeSoundDropdown();
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            
            const soundDropdown = document.getElementById('soundDropdown');
            if (pageId === 'gameScreen') {
                soundDropdown.style.display = 'none';
            } else {
                soundDropdown.style.display = 'block';
            }
        }

        function startNewGame() {
            gameEnded = false;
            gameStarted = false;
            usedWords.clear();
            teams = [
                { name: getRandomTeamName(), score: 0 },
                { name: getRandomTeamName(), score: 0 }
            ];
            renderTeams();
            showPage('teamSetup');
        }

        function renderTeams() {
            const teamList = document.getElementById('teamList');
            teamList.innerHTML = '';
            
            teams.forEach((team, index) => {
                const teamItem = document.createElement('div');
                teamItem.className = 'team-item';
                teamItem.innerHTML = `
                    <span class="team-name">${team.name}</span>
                    <span class="team-score">${team.score}</span>
                `;
                teamItem.onclick = () => editTeam(index);
                teamList.appendChild(teamItem);
            });
        }

        function addTeam() {
            if (teams.length >= 10) {
                alert('–ú–∞–∫—Å–∏–º—É–º 10 –∫–æ–º–∞–Ω–¥!');
                return;
            }
            
            teams.push({ name: getRandomTeamName(), score: 0 });
            renderTeams();
        }

        function editTeam(index) {
            currentEditingTeam = index;
            document.getElementById('teamNameInput').value = teams[index].name;
            document.getElementById('teamModal').classList.add('active');
        }

        function saveTeamName() {
            const newName = document.getElementById('teamNameInput').value.trim();
            if (newName) {
                teams[currentEditingTeam].name = newName;
                renderTeams();
            }
            closeModal();
        }

        function deleteTeam() {
            if (teams.length > 2) {
                teams.splice(currentEditingTeam, 1);
                renderTeams();
            } else {
                alert('–ú–∏–Ω–∏–º—É–º 2 –∫–æ–º–∞–Ω–¥—ã!');
            }
            closeModal();
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        function toggleCategory(e) {
            const btn = e.target.closest('.category-btn');
            btn.classList.toggle('selected');
            
            const selectedThemes = document.querySelectorAll('[data-type="theme"].selected');
            const warning = document.getElementById('themeWarning');
            if (selectedThemes.length > 0) {
                warning.classList.remove('show');
            }
        }

        function proceedToGameSettings() {
            const selectedThemes = document.querySelectorAll('[data-type="theme"].selected');
            const warning = document.getElementById('themeWarning');
            
            if (selectedThemes.length === 0) {
                warning.classList.add('show');
                warning.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            showPage('gameSettings');
        }

        function startGame() {
            gameSettings.skipPenalty = document.getElementById('skipPenalty').checked;
            gameSettings.betAmount = parseInt(document.getElementById('betSlider').value);

            prepareGameWords();
            
            teams.forEach(team => team.score = 0);
            currentTeamIndex = 0;
            gameEnded = false;
            gameStarted = false;
            usedWords.clear();
            
            showPage('gameScreen');
            prepareRound();
        }

        function prepareGameWords() {
            gameWords = [];
            
            const difficulty = difficultyLevels[gameSettings.difficulty].value;
            
            const selectedThemes = Array.from(document.querySelectorAll('[data-type="theme"].selected'))
                .map(btn => btn.dataset.value);
            
            selectedThemes.forEach(theme => {
                if (wordDictionaries[difficulty] && wordDictionaries[difficulty][theme]) {
                    gameWords.push(...wordDictionaries[difficulty][theme]);
                }
            });
            
            gameWords.sort(() => Math.random() - 0.5);
        }

        function prepareRound() {
            const currentTeam = teams[currentTeamIndex];
            document.getElementById('currentTeam').textContent = currentTeam.name;
            document.getElementById('headerScore').textContent = `–û—á–∫–∏: ${currentTeam.score}`;
            document.getElementById('cardText').textContent = '–ì–æ—Ç–æ–≤?';
            
            roundWords = { correct: [], incorrect: [] };
            timeLeft = gameSettings.roundTime;
            gameStarted = false;
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
            document.getElementById('gameTimer').style.display = 'none';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
            const hints = document.getElementById('swipeHints');
            hints.innerHTML = `
                <div class="swipe-hint ready">
                    <span>–°–≤–∞–π–ø –≤–ø—Ä–∞–≤–æ ‚Üí</span>
                    <span>–ì–æ—Ç–æ–≤!</span>
                </div>
            `;
            
            waitForReady();
        }

        function waitForReady() {
            const card = document.getElementById('gameCard');
            card.dataset.mode = 'ready';
        }

        function startCountdown() {
            // –û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç 3, 2, 1, –ü–æ–µ—Ö–∞–ª–∏!
            let countdown = 3;
            const card = document.getElementById('gameCard');
            card.dataset.mode = 'countdown';
            card.classList.add('countdown');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä
            document.getElementById('gameTimer').style.display = 'flex';
            document.getElementById('gameTimer').textContent = gameSettings.roundTime;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
            const hints = document.getElementById('swipeHints');
            hints.innerHTML = `
                <div class="swipe-hint left">
                    <span>‚Üê</span>
                    <span>–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</span>
                </div>
                <div class="swipe-hint right">
                    <span>–û—Ç–≥–∞–¥–∞–Ω–æ</span>
                    <span>‚Üí</span>
                </div>
            `;
            
            const countdownTexts = ['3', '2', '1', '–ü–æ–µ—Ö–∞–ª–∏!'];
            
            const countdownInterval = setInterval(() => {
                if (countdown >= 0) {
                    document.getElementById('cardText').textContent = countdownTexts[3 - countdown];
                    playCountdownSound();
                    countdown--;
                } else {
                    clearInterval(countdownInterval);
                    card.dataset.mode = 'game';
                    card.classList.remove('countdown');
                    gameStarted = true;
                    showNextWord();
                    startTimer();
                }
            }, 1000);
        }

        function showNextWord() {
            const availableWords = gameWords.filter(word => !usedWords.has(word));
            
            if (availableWords.length === 0) {
                usedWords.clear();
                prepareGameWords();
                return showNextWord();
            }
            
            const randomIndex = Math.floor(Math.random() * availableWords.length);
            currentWord = availableWords[randomIndex];
            usedWords.add(currentWord);
            
            document.getElementById('cardText').textContent = currentWord;
        }

        function handleWordResult(isCorrect) {
            if (!gameStarted) return;
            
            const currentTeam = teams[currentTeamIndex];
            
            if (isCorrect) {
                currentTeam.score++;
                roundWords.correct.push(currentWord);
            } else {
                if (gameSettings.skipPenalty) {
                    currentTeam.score = Math.max(0, currentTeam.score - 1);
                }
                roundWords.incorrect.push(currentWord);
            }
            
            playSwipeSound(isCorrect);
            document.getElementById('headerScore').textContent = `–û—á–∫–∏: ${currentTeam.score}`;
            showNextWord();
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('gameTimer').textContent = timeLeft;
                
                if (timeLeft <= 10 && timeLeft > 0) {
                    playTimerSound();
                    document.getElementById('gameTimer').classList.add('warning');
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endRound();
                }
            }, 1000);
        }

        function pauseGame() {
            if (timer && gameStarted) {
                clearInterval(timer);
                isPaused = true;
                document.getElementById('pauseModal').classList.add('active');
            }
        }

        function resumeGame() {
            isPaused = false;
            closeModal();
            if (timeLeft > 0 && !gameEnded && gameStarted) {
                startTimer();
            }
        }

        function exitToMenu() {
            document.getElementById('pauseModal').classList.add('active');
        }

        function exitToMenuConfirm() {
            clearInterval(timer);
            isPaused = false;
            gameEnded = true;
            gameStarted = false;
            closeModal();
            showPage('mainMenu');
        }

        function endRound() {
            clearInterval(timer);
            gameStarted = false;
            document.getElementById('gameTimer').classList.remove('warning');
            showRoundResults();
        }

        function showRoundResults() {
            showPage('roundResults');
            
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';
            
            roundWords.correct.forEach((word, index) => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'word-result correct';
                wordDiv.innerHTML = `<span>${word}</span><span>+1</span>`;
                wordDiv.onclick = () => toggleWordResult(word, index, true);
                resultsList.appendChild(wordDiv);
            });
            
            roundWords.incorrect.forEach((word, index) => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'word-result incorrect';
                const penalty = gameSettings.skipPenalty ? '-1' : '0';
                wordDiv.innerHTML = `<span>${word}</span><span>${penalty}</span>`;
                wordDiv.onclick = () => toggleWordResult(word, index, false);
                resultsList.appendChild(wordDiv);
            });
            
            document.getElementById('correctCount').textContent = roundWords.correct.length;
            document.getElementById('incorrectCount').textContent = roundWords.incorrect.length;
        }

        function toggleWordResult(word, index, wasCorrect) {
            const currentTeam = teams[currentTeamIndex];
            
            if (wasCorrect) {
                roundWords.correct.splice(index, 1);
                roundWords.incorrect.push(word);
                currentTeam.score--;
                if (gameSettings.skipPenalty) {
                    currentTeam.score = Math.max(0, currentTeam.score - 1);
                }
            } else {
                roundWords.incorrect.splice(index, 1);
                roundWords.correct.push(word);
                currentTeam.score++;
                if (gameSettings.skipPenalty) {
                    currentTeam.score++;
                }
            }
            
            showRoundResults();
        }

        function nextRound() {
            currentTeamIndex = (currentTeamIndex + 1) % teams.length;
            
            if (currentTeamIndex === 0) {
                checkForWinner();
            } else {
                showPage('gameScreen');
                prepareRound();
            }
        }

        function checkForWinner() {
            const maxScore = Math.max(...teams.map(team => team.score));
            const teamsWithMaxScore = teams.filter(team => team.score === maxScore);
            
            if (maxScore >= gameSettings.winScore && teamsWithMaxScore.length === 1) {
                endGame();
            } else {
                showPage('gameScreen');
                prepareRound();
            }
        }

        function endGame() {
            clearInterval(timer);
            gameEnded = true;
            gameStarted = false;
            
            const maxScore = Math.max(...teams.map(team => team.score));
            const winners = teams.filter(team => team.score === maxScore);
            
            if (winners.length === 1) {
                const winner = winners[0];
                document.getElementById('winnerName').textContent = winner.name;
                document.getElementById('finalScore').textContent = winner.score;
            } else {
                document.getElementById('winnerName').textContent = '–ù–∏—á—å—è!';
                document.getElementById('finalScore').textContent = maxScore;
            }
            
            const prizePool = gameSettings.betAmount * teams.length;
            document.getElementById('prizeAmount').textContent = prizePool;
            
            showPage('finalResults');
            
            saveGameStats(winners.length === 1 ? winners[0] : null);
        }

        function saveGameStats(winner) {
            const stats = JSON.parse(localStorage.getItem('aliasStats') || '[]');
            stats.push({
                date: new Date().toISOString(),
                winner: winner ? winner.name : '–ù–∏—á—å—è',
                score: winner ? winner.score : Math.max(...teams.map(team => team.score)),
                teams: teams.map(t => ({ name: t.name, score: t.score }))
            });
            localStorage.setItem('aliasStats', JSON.stringify(stats));
        }

        function setupCardSwipe() {
            const card = document.getElementById('gameCard');
            const leftIndicator = document.querySelector('.swipe-indicator.left');
            const rightIndicator = document.querySelector('.swipe-indicator.right');
            const swipeBgLeft = document.getElementById('swipeBgLeft');
            const swipeBgRight = document.getElementById('swipeBgRight');
            
            card.addEventListener('mousedown', startDrag);
            card.addEventListener('touchstart', startDrag, { passive: false });
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag, { passive: false });
            
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
            
            function startDrag(e) {
                e.preventDefault();
                isDragging = true;
                startX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                card.classList.add('dragging');
            }
            
            function drag(e) {
                if (!isDragging) return;
                
                e.preventDefault();
                currentX = e.type.includes('mouse') ? e.clientX : e.touches[0].clientX;
                const deltaX = currentX - startX;
                
                card.style.transform = `translateX(${deltaX}px) rotate(${deltaX * 0.1}deg)`;
                
                if (deltaX < -50) {
                    leftIndicator.classList.add('active');
                    rightIndicator.classList.remove('active');
                    swipeBgLeft.classList.add('active');
                    swipeBgRight.classList.remove('active');
                } else if (deltaX > 50) {
                    rightIndicator.classList.add('active');
                    leftIndicator.classList.remove('active');
                    swipeBgRight.classList.add('active');
                    swipeBgLeft.classList.remove('active');
                } else {
                    leftIndicator.classList.remove('active');
                    rightIndicator.classList.remove('active');
                    swipeBgLeft.classList.remove('active');
                    swipeBgRight.classList.remove('active');
                }
            }
            
            function endDrag(e) {
                if (!isDragging) return;
                
                isDragging = false;
                card.classList.remove('dragging');
                
                const deltaX = currentX - startX;
                const mode = card.dataset.mode;
                
                if (Math.abs(deltaX) > 100) {
                    if (mode === 'ready' && deltaX > 0) {
                        startCountdown();
                    } else if (mode === 'game' && gameStarted && !gameEnded) {
                        handleWordResult(deltaX > 0);
                    }
                }
                
                card.style.transform = '';
                leftIndicator.classList.remove('active');
                rightIndicator.classList.remove('active');
                swipeBgLeft.classList.remove('active');
                swipeBgRight.classList.remove('active');
            }
        }

        window.addEventListener('DOMContentLoaded', init);
        
        document.addEventListener('touchmove', function(e) {
            if (e.target.closest('.game-card')) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
